## Network Protocol
```
네트워크 프로토콜
 ├─ 네트워크를 통해 컴퓨터끼리 통신하기 위한 규약
 ├─ 통신하기 위한 절차를 규정한 것이자 컴퓨터끼리 대화하기 위해 필요한 공통 언어
 ├─ 어떠한 방법으로, 어떤 절차를 거쳐서, 어떤 언어로 정보를 보낼 지 등을 정한 것
 └─ 사용하는 네트워크 서비스에 따라 각각 최적의 프로토콜을 조합하여 사용할 수 있게 됨

관련 용어
 ├─ OSI 참조 모델
 ├─ TCP
 ├─ TCP/IP
 ├─ UDP
 └─ IP
```

---
## OSI Reference Model

네트워크에서는 다른 기종 간에도 문제 없이 데이터를 송수신 할  수 있도록 상호 호환성을 구현하는 것이 중요하다. 또한, 네트워크 기능의 확장이나 서비스 추가 등 새로운 기술을 적용하여 네트워크를 좀 더 고도화해야 할 필요도 있다.

이와 같은 상호 호환성과 확장성을 제공하기 위해 네트워크의 기본 구조는 일곱 개의 층으로 나뉘어져 관리되고 있다. 이 계층 구조를 OSI 참조 모델 혹은 OSI 계층 모델이라고 한다.
```
물리 계층
 ├─ 제일 하단에 위치한 1계층
 ├─ 물리적으로 어떻게 연결할 것인가?
 └─ 물리적인 케이블 핀의 수나 전기적 특성을 정하여 송출 데이터의 전기적 교환을 실시

데이터 링크 계층
 ├─ 2계층
 ├─ 같은 네트워크 내에서 어떻게 통신할 것인가?
 └─ 직접 연결된 상대와의 통신 경로를 확보, 데이터의 오류를 정정하거나 재전송 요청 등 실시

네트워크 계층
 ├─ 3계층
 ├─ 네트워크와 네트워크를 어떻게 중개할 것인가?
 └─ 상대에게 전송하는 데이터 경로 선택, 네트워크 상의 개개인을 식별위한 주소 관리 등 수행

전송 계층
 ├─ 4계층
 ├─ 통신의 신뢰성을 어떻게 관리할 것인가?
 ├─ 3계층에서 보내온 데이터의 정렬 및 오류 정정을 수행하여 송수신되는 데이터의 신뢰성 확보
 └─ TCP나 UDP같은 프로토콜이 이 계층에서 사용됨

세션 계층
 ├─ 5계층
 ├─ 통신의 시작과 끝을 어떻게 관리할 것인가?
 └─ 통신의 시작점과 끝점이 되는 통신 프로그램 사이의 연결을 관리하고 통신 경로 확립 수행

표현 계층
 ├─ 6계층
 ├─ 데이터를 어떤 형식으로 할 것인가?
 └─ 압축 방식이나 문자 코드 등을 관리하고 응용프로그램과 네트워크를 중개함

응용 계층
 ├─ 7계층
 ├─ 구체적으로 어떤 서비스를 제공할 것인가?
 └─ 통신을 사용하기 위해 필요한 서비스를 사용자나 프로그램에게 제공

OSI 참조 모델은 네트워크의 기본 구조를 일곱 개 계층으로 나누어 표준화 한 것이다.
송신하는 곳은 응용 계층에서 물리계층까지 순서대로 데이터를 가공하여 보내고, 수신하는 곳은 받은 데이터를 역순으로 가공하여 이를 복원한다.
```

---
## TCP/IP

인터넷에서 표준으로 사용되는 네트워크 프로토콜이 TCP/IP이다. OSI 참조 모델 3계층(네트워크 계층)의 IP를 비롯한 여러 프로토콜의 집합체를 총칭하여 이렇게 부른다. TCP/IP는 주로 4계층(전송 계층)에 위치하는 TCP와 조합하여 구성된다.
```
이 프로토콜을 사용하여 전송되는 데이터는 패킷이라는 단위로 나누어져 통신한다. 
각각의 패킷에는 목적지 주소(상대방의 IP 주소)가 포함되어 있고, 
패킷들은 마치 컨베이어 벨트에서 짐을 운반하는 것처럼 네트워크에 흘러서 상대방에게 전달된다. 
하위 계층인 IP는 네트워크 각 기기의 주소를 할당하거나 해당 주소를 기반으로 패킷을 전송하는 역할을 한다.
-> 기기의 주소를 정하고 그 주소까지 데이터를 보내기 위한 프로토콜

상위 계층인 TCP는 패킷의 수신 확인을 실시하며 올바른 순서로 패킷이 전달되도록 보장한다.
-> 신뢰성이 높고, 정확하게 데이터를 송수신하는 것이 가능

수신 확인이나 패킷의 재송신과 같은 절차를 수행하므로 TCP는 상당히 무거운 프로토콜이다.
신뢰성보다 빠른 처리 속도를 더 중시하는 UDP라는 프로토콜도 있다.

=> 용도에 맞게 사용하면 된다.
```

```
가장 기본적인 IP는 각 기기를 식별하기 위한 IP 주소라는 개념과 주소를 기준으로 패킷을 중개하여 전달하는 역할을 담당하고 있다. 
이 IP에 어떻게 패킷을 전달해야 할지 정의되어 있는 상위 계층의 프로토콜(TCP or UDP)을 조합하여 통신을 한다.
```

---
## IP
IP(Internet Protocol)는 OSI 참조 모델의 3계층인 네트워크 계층에서 사용되는 네트워크 프로토콜로, 네트워크 상의 기기에 주소를 할당하거나 해당 주소로 패킷을 전송하는 역할을 수행한다. 쉽게 말해 각 기기의 주소를 할당하고 거기까지 데이터를 전송하기 위한 프로토콜이다.
-> 네트워크상의 기기에 주소를 할당하고 경로를 선택하여 데이터를 전송하기 위한 프로토콜

IP는 전송 데이터인 패킷을 TCP나 UDP 같은 상위 계층에서 수신한 뒤, IP 헤더라는 정보를 추가하여 네트워크에 전송한다. IP 헤더는 송신지와 수신지의 IP 주소를 비롯한 정보가 모여 있으며, 패킷이라는 소포에 붙어 있는 꼬리표 같은 것이다. 네트워크에 전송되는 패킷은 이 꼬리표를 바탕으로 올바른 목적지로 전송된다.

IP에는 경로를 선택하는 방법도 정의되어 있어 이를 통해 여러 개의 네트워크를 넘나드는 통신이 가능하다. 실제로 LAN과 외부 네트워크를 연결하는 기기인 라우터가 IP 경로 선택(라우팅)을 지원하며, 이 라우터에서 대상이 속해 있는 네트워크의 라우터로 패킷이 전송되어 목적지에 도착하는 것이다.

=> 이와 같은 기술에 의해 글로벌 규모의 네트워크를 서로 연결한 것이 현재 널리 사용되고 있는 인터넷이다.

---
## TCP

OSI 참조 모델의 4계층인 전송 계층에서 사용되는 네트워크 프로토콜로, 신뢰성이 높은 데이터 통신을 보장한다. 신뢰성이 높다는 것은 데이터의 손실이 없으며 확실하게 상대에게 전송한다는 의미이다.

TCP(Transmission Contol Protocol)는 5계층(세션 계층) 이상의 프로토콜에서 통신 데이터를 수신하여 패킷으로 분할한다. 그리고 이 패킷을 3계층(네트워크 계층)의 IP에 전달하여 상대방에게 송신한다.

```
패킷이 전송한 순서대로 도착하면 좋겠지만, 실제로 패킷을 전송하는 IP는 이를 보장하지 않는다.
따라서 네트워크의 혼잡 상황에 따라 패킷의 손실이나 지연에 의해 순서가 뒤바뀌는 일이 발생할 수 있다. 
이에 대응하여 데이터 통신이 신뢰성을 가질 수 있도록 TCP는 몇 가지 방법을 이용함.

신뢰성 확보 방법
 ├─ 통신 데이터를 패킷으로 분할할 때 분할순으로 시퀀스 번호를 부여
 ├─ 수신측에서 이 번호를 확인하고 필요에 따라 순서를 정렬하여 패킷의 순서가 올바른지 확인
 ├─ 수신 측에서는 수신했다는 것을 알리는 패킷(ACK 패킷)을 송신 측에 전송
 ├─ 송신 측도 전송한 패킷이 도착했는지 여부를 판단함
 └─ 일정 시간 기다려도 대답이 없는 경우에는 패킷을 다시 전송하도록 하여 손실을 방지함

=> 현재는 TCP와 IP를 조합한 TCP/IP가 주류를 이루며, 인터넷에서 각종 서비스의 기반으로 활용
```

---
## UDP

OSI 참조 모델의 4계층(전송 계층)에서 사용하는 네트워크 프로토콜이며, 연결이 없는 형태(데이터그램)의 통신 기능을 제공한다. 연결이 없는 형태란 지금부터 정보를 보낸다고 상대방에게 통지하지 않고 보내는 전송 방법을 말한다. 따라서 통신의 신뢰성은 낮지만 TCP와 달리 프로토콜 자체의 처리가 가벼우므로 속도가 빠른 것이 특징이다.
UDP(User Datagram Protocol)는 3계층(네트워크 계층)의 IP를 5계층(세션 계층) 이상의 프로토콜에서 직접 사용할 수 있도록 중개 역할을 한다고 볼 수 있다.

```
UDP는 상위 계층의 응용 프로그램에서 수신한 데이터를 패킷으로 분할하여 IP를 통해 전송만 할 뿐, TCP처럼 수신 확인은 하지 않는다. 
당연히 패킷이 도착했는지 송신 측은 알 수 없고, 실제로 네트워크 상황에 따라 받지 못하는 경우도 일어날 수 있다.

이와 같이 신뢰성이 낮은 점과 처리 속도가 빠른 점을 감안하여, 
주로 작은 사이즈의 패킷을 주고받기만 하면 되는 응용프로그램이나 시간적 연속성이 중요한 응용 프로그램에서 사용하는 프로토콜

ex) DNS나 DHCP 같은 서비스가 있으며, 
후자의 경우 음성 전화나 동영상 배포와 같이 소리가 살짝 끊겨도 시간적인 연속성이 중요한 응용 프로그램이 있다.
```

```
UDP는 IP에 의해 데이터를 전송하는 기능을 상위 계층에서 직접 제어하기 위한 프로토콜임
신뢰성은 낮지만 속도가 빠르기 때문에 실시간 용도로 적합함
```

---
## 패킷
패킷이란 컴퓨터 통신에서 작게 분할된 통신 데이터의 단위를 말하며, '소포(packet)'라는 의미에서 옴

```
큰 데이터가 분할되지 않고 네트워크로 전송되면 이 데이터가 회선을 점유하여 다른 기기가 전혀 통신할 수 없는 문제가 발생한다.
따라서 통신 데이터를 패킷이라는 단위로 작게 분할하여 패킷 하나가 점유하는 시간을 최소로 만들어 회선을 공유한다.

패킷 통신
 └─ 데이터를 패킷으로 분할하여 송수신하는 통신
```

```
패킷에는 송신지와 수신지의 주소 같은 속성 정보가 포함되어 있다.
이 정보는 소포에 붙이는 꼬리표 같은 것으로,
이 꼬리표를 바탕으로 네트워크를 통해 패킷이 올바른 목적지에 운반된다.
패킷에는 패킷이 사용하는 네트워크 프로토콜에 대한 정보도 포함되어 있다.
이로 인해 여러 네트워크 프로토콜이 동일한 네트워크 회선 상에 혼재가 된 상태에서도 이용할 수 있다.
```

---
## 노드
네트워크에 연결되어 있는 네트워크 기기나 네트워크의 연결 지점을 노드라고 한다. 네트워크에 연결된 컴퓨터는 물론이고 집선 장치인 허브, 네트워크 사이를 연결하는 라우터 등도 모두 '노드'다.
```
노드(node)라는 단어를 사전에서 찾아보면 '접속점', '마디'라는 의미를 가지고 있다.
즉, 네트워크 케이블의 연결점이나 분기점이 되는 부분이 노드라는 의미다.
-> '네트워크에 존재하는 기기'는 모두 노드라고 생각하면 됨

=> '노드 간에 패킷을 송수신한다'라는 말은 네트워크 상의 장비 간에 패킷을 주고받는다는 의미로 생각하면 됨
```

---
## IP 주소
인터넷과 같이 IP를 기반으로 하는 네트워크에서 각 컴퓨터 한 대마다 할당된 식별 번호가 IP 주소다.
현재는 32비트의 숫자로 표현하는 IPv4(Internet Protocol version 4)가 일반적이다.
다만, 숫자 그대로는 이해하기 어렵기 때문에 8비트씩 네 개로 분할하고 각각을 10진수로 표기해 `192.168.0.1`과 같이 표현한다.

```
위 번호는 네트워크의 주소를 나타냄.
우리가 평소 사용하는 주소 표기를 컴퓨터용으로, 디지털 숫자로 나타냈다.
실제로 IP 주소의 내용은 네트워크 별로 나누어지는 '네트워크 주소' 부분과 
그 네트워크 내에서 컴퓨터를 식별하기 위한 '호스트 주소' 부분을 조합하여 구성된다.
주소 표기로 말하면 주소와 이름에 해당한다.

네트워크에 전송되는 패킷에는 반드시 송신지와 수신지의 IP 주소가 속성 정보로 포함되어 있다.
즉, IP 주소를 가진 곳으로 패킷을 배달한다.
```

통신할 때 상대방을 특정하기 위해 꼭 필요한 번호이므로 당연히 각각의 컴퓨터에 할당되는 값이 중복되어서는 안 된다. 그러나 32비트의 값으로 표현할 수 있는 수의 범위는 정해져 있으므로 그 수가 부족해질지도 모른다는 우려가 있다. 이 때문에 현재는 IPv4를 사용하면서 128비트의 수로 표현하는 IPv6로의 이전이 진행되고 있다.

---
## 서브넷 마스크
네트워크의 규모가 커지면 단일 네트워크로 관리하는 것이 사실상 어려워진다. 특히 브로드캐스트(broadcast)라고 하는 네트워크 전체에 송신하는 데이터 전송이 발생할 경우 필요하지 않은 범위까지 불필요하게 회선을 사용하게 되므로 네트워크 전체의 효율이 나빠지게 된다.

네트워크를 논리적으로 분할한다면 이러한 문제는 피할 수 있다.
-> 서브넷(subnet) : 원래는 하나여야 할 네트워크를 작은 단위로 분할한 것

```
서브넷 마스크(subnet mask)
 ├─ 서브넷을 표현하기 위한 값
 ├─ IP 주소의 앞에서부터 몇 비트까지 네트워크 주소로 사용할지 정의하기 위해 사용
 ├─ IP주소는 네트워크를 식별하는 네트워크 주소 부분과 
 │  네트워크 상의 컴퓨터를 식별하기 위한 호스트 주소 부분으로 나눌 수 있음
 └─ 서브넷 마스크에 의해 호스트 주소 부분 중 몇 개의 비트를 네트워크 주소 부분으로 재정의,
    단일 네트워크를 서브넷으로 구분할 수 있음
```

예를 들어 `172.16.0.0 ~ 172.16.255.255` 범위의 IP 주소를 사용하는 네트워크는 앞부분 16비트까지가 네트워크 주소 부분에 해당한다. 여기에255.255.255.0이라는 서브넷 마스크를 지정하면 앞에서부터 24비트까지가 네트워크 주소로 정의된다. 이를 통해 172.16 이하의 네트워크는 `172.16.0~172.16.255`라는 256개의 서브넷으로 나누어진다.

---
## 포트 번호
TCP/IP 세계에서는 IP 주소를 기반으로 통신이 이루어진다. 하지만 컴퓨터에는 여러 가지 프로그램이 동작하기 마련이고, 이들이 동시에 통신하는 일도 빈번히 일어난다.
그러나 IP 주소로 알 수 있는 것은 '네트워크의 어느 곳에 존재하는 컴퓨터인지'까지다.
'그 컴퓨터의 어느 프로그램에 전달할 패킷인가?'까지는 알 수 없다.

-> 그래서 사용하는 것이 포트 번호

```
포트는 접속 장소 라는 의미로 생각하면 된다. 네트워크에 대한 접속 장소로, 포트 번호는 0~65.535까지의 숫자를 적용할 수 있다. 
프로그램이 네트워크에서 통신할 경우 접속 장소로 포트를 열고, 상대방의 IP 주소의 포트로 패킷을 송수신하거나 수신한다.

우리가 평소 사용하는 인터넷 서비스의 예로 WWW나 이메일이 있다. 
이들을 사용할 때도 포트 번호를 지정하여 상대 서버와 통신을 한다.
실제로는 TCP/IP에 프로그램(서비스)별로 기본 포트가 정해져 있어, 일반적으로는 그 포트 번호를 사용하여 통신하는 것이다. 통신할 때마다 포트번호가
```